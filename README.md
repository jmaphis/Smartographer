# [Smartographer](http://smartographer.fly.dev)</h1>

![passing](https://img.shields.io/badge/build-passing-success)

## About

Smartographer is a map generation web app, by James Maphis. <br>
You currently can make dungeon, cave and world maps by pressing their respective buttons. To get a new map of the chosen type, press the refresh button. If you find a map you would like to save, you can create an account and sign in. then simply give the map a name, and hit save! (Currently Smartographer is just a proof of concept.  I cannot guarantee that user accounts and maps will not be deleted.)
<br><br>

## How to use

If you're just interested in playing around with the Smartographer app, you can do so [here](http://smartographer.fly.dev/).

If you're interested in working with the code, simply clone the repository, navigate to the folder containing the app, and enter the following into the terminal:

#### For windows

```
> py -3 -m venv venv
> venv\scripts\activate
> pip3 install -r requirements.txt
```

#### For macOS/Linux

```
$ python3 -m venv venv
$ . venv/bin/avtivate
$ pip3 install -r requirements.txt
```

This will create and activate the virtual environment, then install the dependancies. To run the app locally, enter the following:

```
$ flask --app smartographer --debug run
```

You can find the app, and any changes you make, by opening your browser to http://127.0.0.1:5000/

## How it Works

Smartographer is powered by 3 separate procedural generation algorithms, which serve as the back end. They are connected to the front end by a Map Manager object, which fetches a map of the appropriate type. These maps are represented by two dimensional arrays of binary integers, which the Map Manager converts \<div\> tags. Storing the maps in a database proved challenging, but seeding the random number generator, and storing the seed in the database allows the application to consistantly generate identical maps on demand.<br>

These underlying algorithms are as follows:<br>

### [Cave](https://smartographer.fly.dev/maps/gen/cave)

  Cave maps are generated using a technique called [Random Walk](https://en.wikipedia.org/wiki/Random_walk). The algorithm currently takes 750 steps. To ensure maps of equal size, steps are only counted if they land on a tile which has never been stepped on previously. If the algorithm attempts to step out of the bounds of the matrix, the "walker" is returned to the center of the map.

### [Dungeon](https://smartographer.fly.dev/maps/gen/dungeon)

  Dungeon maps are generated by placing six square rooms onto the matrix, each time makeing sure the new room does not overlap with existing rooms. The rooms are sorted by their distance from the top right corner before hallways are added, connecting each room to the next room in the list. This reduces the number of extremely long hallways, without eliminating them altogether. I felt that this small chance or extreme hallways adds charm to the maps that they appear on.

### [World](https://smartographer.fly.dev/maps/gen/world)
  
  World maps are first populated with a random assortment of 1s and 0s, representing land ad water, respectively. (An approximate 40/60 split of land and water seems to produce the best results.) A simple [Cellular Automaton](https://en.wikipedia.org/wiki/Cellular_automaton) is then applied to the matrix to group together land tiles into clusters resembling islands. Applying more layers of the CA results in smoother, more rounded islands. I have found 2 layers to produce the best results.
